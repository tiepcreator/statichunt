{{ define "title" }}{{ .Title }} - Theme Info{{ end }}
{{ define "header_css" }}{{ end }}
{{ define "body_classes" }}page-default-single{{ end }}

{{ define "ogmeta" }}
<meta property="og:title" content="{{ .Title }}" />
<meta property="og:type" content="website" />
<meta property="og:url" content="{{ .Permalink }}" />
<meta property="og:description" content="{{ .Params.description }}" />
{{ $repoName := printf "%s" (substr (replace .Params.github "/" "-") 19 | urlize) }}
{{ $repo := index .Site.Data.themes $repoName }}
{{ if $repo }}
{{ $staticPath := (printf "%s/%s%s" "static/themes/thumbnails" $repo.theme_key ".png") }}
{{ $filePath := (printf "%s/%s%s" "themes/thumbnails" $repo.theme_key ".png") }}
{{ if (fileExists $staticPath) }}
<meta property="og:image" content="{{ $filePath | absURL }}">
{{ end }}
{{ end }}
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@statichunt" />
<meta name="twitter:creator" content="@statichunt" />
{{end}}

{{ define "meta_description" }}
{{ $themes := (where .Site.RegularPages "Type" "theme") }}
{{ $themes := (where $themes ".Params.draft" "!=" true) }}
{{ $themes := (where $themes ".Params.stale" "!=" true) }}
{{ $themes := (where $themes ".Params.disabled" "!=" true) }}
{{ $themeCount := len $themes}}
<meta name="description" content="{{ .Params.description }}">
{{ end }}

{{ define "main" }}
{{ $repoName := printf "%s" (substr (replace .Params.github "/" "-") 19 | urlize) }}

{{ $repo := index .Site.Data.themes $repoName }}
{{ $statichunt := index .Site.Data.themes $repoName }}

<div class="wrapper">
  <div class="main">
    <div class="container">
      <div class="theme theme-detail" data-name="{{ .Title }}">
        <div class="row justify-content-center">
          <div class="col-lg-8">
            <!-- iframe -->
            <div class="bws-block position-relative d-none d-md-block">
              <div class="bws-loader">
                <svg class="mb-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="50px" height="50px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><g transform="translate(50 50)">  <g transform="translate(-19 -19) scale(0.6)"> <g>
                <animateTransform attributeName="transform" type="rotate" values="0;45" keyTimes="0;1" dur="0.2s" begin="0s" repeatCount="indefinite"></animateTransform><path d="M31.359972760794346 21.46047782418268 L38.431040572659825 28.531545636048154 L28.531545636048154 38.431040572659825 L21.46047782418268 31.359972760794346 A38 38 0 0 1 7.0000000000000036 37.3496987939662 L7.0000000000000036 37.3496987939662 L7.000000000000004 47.3496987939662 L-6.999999999999999 47.3496987939662 L-7 37.3496987939662 A38 38 0 0 1 -21.46047782418268 31.35997276079435 L-21.46047782418268 31.35997276079435 L-28.531545636048154 38.431040572659825 L-38.43104057265982 28.531545636048158 L-31.359972760794346 21.460477824182682 A38 38 0 0 1 -37.3496987939662 7.000000000000007 L-37.3496987939662 7.000000000000007 L-47.3496987939662 7.000000000000008 L-47.3496987939662 -6.9999999999999964 L-37.3496987939662 -6.999999999999997 A38 38 0 0 1 -31.35997276079435 -21.460477824182675 L-31.35997276079435 -21.460477824182675 L-38.431040572659825 -28.531545636048147 L-28.53154563604818 -38.4310405726598 L-21.4604778241827 -31.35997276079433 A38 38 0 0 1 -6.999999999999992 -37.3496987939662 L-6.999999999999992 -37.3496987939662 L-6.999999999999994 -47.3496987939662 L6.999999999999977 -47.3496987939662 L6.999999999999979 -37.3496987939662 A38 38 0 0 1 21.460477824182686 -31.359972760794342 L21.460477824182686 -31.359972760794342 L28.531545636048158 -38.43104057265982 L38.4310405726598 -28.53154563604818 L31.35997276079433 -21.4604778241827 A38 38 0 0 1 37.3496987939662 -6.999999999999995 L37.3496987939662 -6.999999999999995 L47.3496987939662 -6.999999999999997 L47.349698793966205 6.999999999999973 L37.349698793966205 6.999999999999976 A38 38 0 0 1 31.359972760794346 21.460477824182686 M0 -23A23 23 0 1 0 0 23 A23 23 0 1 0 0 -23" fill="#000000"></path></g></g> <g transform="translate(19 19) scale(0.6)"> <g>
                <animateTransform attributeName="transform" type="rotate" values="45;0" keyTimes="0;1" dur="0.2s" begin="-0.1s" repeatCount="indefinite"></animateTransform><path d="M-31.35997276079435 -21.460477824182675 L-38.431040572659825 -28.531545636048147 L-28.53154563604818 -38.4310405726598 L-21.4604778241827 -31.35997276079433 A38 38 0 0 1 -6.999999999999992 -37.3496987939662 L-6.999999999999992 -37.3496987939662 L-6.999999999999994 -47.3496987939662 L6.999999999999977 -47.3496987939662 L6.999999999999979 -37.3496987939662 A38 38 0 0 1 21.460477824182686 -31.359972760794342 L21.460477824182686 -31.359972760794342 L28.531545636048158 -38.43104057265982 L38.4310405726598 -28.53154563604818 L31.35997276079433 -21.4604778241827 A38 38 0 0 1 37.3496987939662 -6.999999999999995 L37.3496987939662 -6.999999999999995 L47.3496987939662 -6.999999999999997 L47.349698793966205 6.999999999999973 L37.349698793966205 6.999999999999976 A38 38 0 0 1 31.359972760794346 21.460477824182686 L31.359972760794346 21.460477824182686 L38.431040572659825 28.531545636048158 L28.53154563604818 38.4310405726598 L21.460477824182703 31.35997276079433 A38 38 0 0 1 6.9999999999999964 37.3496987939662 L6.9999999999999964 37.3496987939662 L6.999999999999995 47.3496987939662 L-7.000000000000009 47.3496987939662 L-7.000000000000007 37.3496987939662 A38 38 0 0 1 -21.46047782418263 31.359972760794385 L-21.46047782418263 31.359972760794385 L-28.531545636048097 38.43104057265987 L-38.431040572659796 28.531545636048186 L-31.35997276079433 21.460477824182703 A38 38 0 0 1 -37.34969879396619 7.000000000000032 L-37.34969879396619 7.000000000000032 L-47.34969879396619 7.0000000000000355 L-47.3496987939662 -7.000000000000002 L-37.3496987939662 -7.000000000000005 A38 38 0 0 1 -31.359972760794346 -21.46047782418268 M0 -23A23 23 0 1 0 0 23 A23 23 0 1 0 0 -23" fill="#000000"></path></g></g></g></svg>
                <span>Wait a moment <br> Live Preview is loading</span>
              </div>
              <script>setTimeout(function() {document.querySelector('.bws-loader').classList.add('fadeOut');}, 4000);</script>

              <div class="bws-header">
                <div class="bws-actions">
                  {{ with .Params.demo }}
                  <a target="blank" href="{{.| safeURL}}?ref=statichunt.com">Full Preview</a>
                  {{ end }}
                </div>
              </div>
              <div class="bws-content">
                <iframe sandbox="allow-same-origin allow-scripts allow-popups allow-forms" loading="lazy"
                  src="{{ .Params.demo }}/" title="Andromeda"></iframe>
              </div>
            </div>

            <div class="bws-device-toggle d-none d-md-block text-center">
              <button type="button" class="bws-device-toggle-desktop has-tooltip" aria-label="Toggle Desktop" title="Desktop Mode">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-device-desktop" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                  <rect x="3" y="4" width="18" height="12" rx="1"></rect>
                  <line x1="7" y1="20" x2="17" y2="20"></line>
                  <line x1="9" y1="16" x2="9" y2="20"></line>
                  <line x1="15" y1="16" x2="15" y2="20"></line>
               </svg>
              </button>
              <button type="button" class="bws-device-toggle-mobile has-tooltip" aria-label="Toggle Mobile" title="Mobile Mode">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-device-mobile" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                  <rect x="7" y="4" width="10" height="16" rx="1"></rect>
                  <line x1="11" y1="5" x2="13" y2="5"></line>
                  <line x1="12" y1="17" x2="12" y2="17.01"></line>
               </svg>
              </button>
            </div>

            <!-- image -->
            <div class="theme-detail-image d-block d-md-none mb-4">
              {{ if $repo }}
              {{ $staticPath := (printf "%s/%s%s" "static/themes/thumbnails" $repo.theme_key ".jpg") }}
              {{ $filePath := (printf "%s/%s%s" "themes/thumbnails" $repo.theme_key ".jpg") }}
              {{ if (fileExists $staticPath) }}
              <img src="{{ $filePath | relURL }}" alt="{{ .Title }} screenshot" />
              {{ end }}
              {{ end }}
            </div>

            <!-- content -->
            <div class="content">
              {{ .Content }}
            </div>

          </div>
          <div class="col-lg-4">

            <!-- theme info -->
            <div class="intro widget">
              <div class="intro-heading">
                <h1 class="intro-title">{{ .Title }} </h1>
              </div>
              <div class="intro-description">
                <p>{{ .Params.description }}</p>
                {{ if $repo }}{{ partial "labels/label-stars.html" (dict "stars" $repo.stars) }}{{ end }}
                {{ if $repo }}{{ partial "labels/label-forks.html" (dict "forks" $repo.forks) }}{{ end }}
                {{ if $repo }}{{ partial "labels/label-last-commit.html" (dict "last_commit" $repo.last_commit) }}{{ end }}

                <div class="action-buttons action-buttons-detail mb-0">
                  <a class="action-button action-button-github" data-action="github" data-context="detail"
                    data-name="{{ .Title }}" href="{{with .Params.github }}{{. | safeURL}}{{else}}{{.Params.Product | safeURL}}{{end}}" target="_blank" rel="nofollow noopener">{{if .Params.github}}Github{{else}}Website{{end}}</a>
    
                  <a class="action-button action-button-demo" data-action="demo" data-context="detail" target="_blank"
                    data-name="{{ .Title }}" href="{{ .Params.demo }}?ref=statichunt.com">Live Demo</a>
                </div>
              </div>
            </div>

            <!-- author info -->
            <div class="widget">
              <h3 class="h4">Author Details:</h3>
              {{ partial "author-details.html" . }}
            </div>

            <!-- categories -->
            <div class="theme-detail-tags widget">
              <h3 class="h4">Product Categories:</h3>
              {{ if .Params.ssg }}
              {{- range .Params.ssg }}
              {{- with $.Site.GetPage "taxonomyTerm" (printf "ssg/%s" (urlize .)) }}
              {{ partial "icons/icon-link-widget.html" (dict "name" .Page.Title "icon" .Page.Params.icon "link" .Page.Permalink) }}
              {{ end }}
              {{ end }}
              {{ end }}

              {{ if .Params.cms }}
              {{- range .Params.cms }}
              {{- with $.Site.GetPage "taxonomyTerm" (printf "cms/%s" (urlize .)) }}
              {{ if eq .Page.Title "No CMS" }}
              {{ else }}
              {{ partial "icons/icon-link-widget.html" (dict "name" .Page.Title "icon" .Page.Params.icon "link" .Page.Permalink) }}
              {{ end }}
              {{ end }}
              {{ end }}
              {{ end }}

              {{ if .Params.css }}
              {{- range .Params.css }}
              {{- with $.Site.GetPage "taxonomyTerm" (printf "css/%s" (urlize .)) }}
              {{ if eq .Page.Title "No css" }}
              {{ else }}
              {{ partial "icons/icon-link-widget.html" (dict "name" .Page.Title "icon" .Page.Params.icon "link" .Page.Permalink) }}
              {{ end }}
              {{ end }}
              {{ end }}
              {{ end }}

              {{ if .Params.archetype }}
              {{- range .Params.archetype }}
              {{- with $.Site.GetPage "taxonomyTerm" (printf "archetype/%s" (urlize .)) }}
              {{ if eq .Page.Title "No archetype" }}
              {{ else }}
              {{ partial "icons/icon-link-widget.html" (dict "name" .Page.Title "icon" .Page.Params.icon "link" .Page.Permalink) }}
              {{ end }}
              {{ end }}
              {{ end }}
              {{ end }}

              {{ if .Params.services }}
              {{- range .Params.services }}
              {{- with $.Site.GetPage "taxonomyTerm" (printf "services/%s" (urlize .)) }}
              {{ if eq .Page.Title "No services" }}
              {{ else }}
              {{ partial "icons/icon-link-widget.html" (dict "name" .Page.Title "icon" .Page.Params.icon "link" .Page.Permalink) }}
              {{ end }}
              {{ end }}
              {{ end }}
              {{ end }}
            </div>

            {{ if .Params.hosting }}
            <!-- hosting -->
            <div class="widget theme-detail-tags">
              <h3 class="h4">Host This Theme With:</h3>
              {{- range .Params.hosting }}
              {{- with $.Site.GetPage "taxonomyTerm" (printf "hosting/%s" (urlize .)) }}
              {{ partial "icons/icon-link-widget.html" (dict "name" .Page.Title "icon" .Page.Params.icon "link" .Page.Permalink) }}
              {{ end }}
              {{ end }}
            </div>
            {{ end }}

            <!-- share -->
            <div class="widget">
              <h3 class="h4">Share This Theme:</h3>
              {{ partial "social-share.html" . }}
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{{ end }}